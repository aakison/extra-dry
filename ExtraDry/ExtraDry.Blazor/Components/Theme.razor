@namespace ExtraDry.Blazor

<CascadingValue Value="@ThemeInfo">
    @ChildContent
</CascadingValue>

@code {

    [Parameter]
    public RenderFragment ChildContent { get; set; }

    [Parameter]
    public IEnumerable<IconInfo> Icons { get; set; }

    [Parameter]
    public string IconTemplate { 
        get => ThemeInfo.IconTemplate;
        set => ThemeInfo.IconTemplate = value;
    }

    [CascadingParameter]
    public ThemeInfo ThemeInfo { get; set; } = new();

    [Parameter]
    public string IconPrefix {
        get => ThemeInfo.IconTemplate;
        set => ThemeInfo.IconTemplate = value;
    }

    [Parameter]
    public Type ErrorComponent {
        get => ThemeInfo.ErrorComponent;
        set => ThemeInfo.ErrorComponent = value; 
    }

    protected override void OnParametersSet()
    {
        base.OnParametersSet();
        ThemeInfo.Icons = Icons.ToDictionary(e => e.Key, e => e, StringComparer.InvariantCultureIgnoreCase);
    }

}
